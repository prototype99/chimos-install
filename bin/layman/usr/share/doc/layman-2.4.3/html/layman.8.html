<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>LAYMAN(8)</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /></head><body><div xml:lang="en" class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="idm46452245627072"></a>LAYMAN(8)</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Brian</span> <span class="surname">Dolbec</span></h3><code class="email">&lt;<a class="email" href="mailto:dolsen@gentoo.org">dolsen@gentoo.org</a>&gt;</code></div></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="#_name">1. NAME</a></span></dt><dt><span class="section"><a href="#_synopsis">2. SYNOPSIS</a></span></dt><dt><span class="section"><a href="#_description">3. DESCRIPTION</a></span></dt><dd><dl><dt><span class="section"><a href="#_warning">3.1. WARNING</a></span></dt></dl></dd><dt><span class="section"><a href="#_options">4. OPTIONS</a></span></dt><dd><dl><dt><span class="section"><a href="#_actions">4.1. ACTIONS</a></span></dt><dt><span class="section"><a href="#_path_options">4.2. PATH OPTIONS</a></span></dt><dt><span class="section"><a href="#_output_options">4.3. OUTPUT OPTIONS</a></span></dt><dt><span class="section"><a href="#_additional_options">4.4. ADDITIONAL OPTIONS</a></span></dt></dl></dd><dt><span class="section"><a href="#_configuration">5. CONFIGURATION</a></span></dt><dd><dl><dt><span class="section"><a href="#_database_configuration_options">5.1. DATABASE CONFIGURATION OPTIONS</a></span></dt><dt><span class="section"><a href="#_repo_configuration_options">5.2. REPO CONFIGURATION OPTIONS</a></span></dt></dl></dd><dt><span class="section"><a href="#_handling_overlays">6. HANDLING OVERLAYS</a></span></dt><dd><dl><dt><span class="section"><a href="#_overlay_lists">6.1. OVERLAY LISTS</a></span></dt><dt><span class="section"><a href="#_filtering_protocol_urls">6.2. FILTERING PROTOCOL URLS</a></span></dt><dt><span class="section"><a href="#_local_cache">6.3. LOCAL CACHE</a></span></dt><dt><span class="section"><a href="#_handling_etc_portage_make_conf">6.4. HANDLING /ETC/PORTAGE/MAKE.CONF</a></span></dt><dt><span class="section"><a href="#_adding_removing_and_updating_overlays">6.5. ADDING, REMOVING AND UPDATING OVERLAYS</a></span></dt><dt><span class="section"><a href="#_emphasis_role_strong_new_emphasis_disabling_and_re_enabling_overlays">6.6. <span class="strong"><strong>NEW</strong></span> DISABLING, AND RE-ENABLING OVERLAYS</a></span></dt><dt><span class="section"><a href="#_list_overlays">6.7. LIST OVERLAYS</a></span></dt><dt><span class="section"><a href="#_searching_ebuilds_in_overlays">6.8. SEARCHING EBUILDS IN OVERLAYS</a></span></dt><dt><span class="section"><a href="#_overlay_types">6.9. OVERLAY TYPES</a></span></dt></dl></dd><dt><span class="section"><a href="#_overlay_lists_2">7. OVERLAY LISTS</a></span></dt><dd><dl><dt><span class="section"><a href="#_overlay_list_format">7.1. OVERLAY LIST FORMAT</a></span></dt><dt><span class="section"><a href="#_adding_an_overlay_locally">7.2. ADDING AN OVERLAY LOCALLY</a></span></dt><dt><span class="section"><a href="#_adding_an_overlay_globally">7.3. ADDING AN OVERLAY GLOBALLY</a></span></dt></dl></dd><dt><span class="section"><a href="#_examples">8. EXAMPLES</a></span></dt><dd><dl><dt><span class="section"><a href="#_installing_an_overlay">8.1. INSTALLING AN OVERLAY</a></span></dt><dt><span class="section"><a href="#_syncing_your_overlays">8.2. SYNCING YOUR OVERLAYS</a></span></dt><dt><span class="section"><a href="#_performing_several_actions_at_the_same_time">8.3. PERFORMING SEVERAL ACTIONS AT THE SAME TIME</a></span></dt></dl></dd><dt><span class="section"><a href="#_files">9. FILES</a></span></dt><dt><span class="section"><a href="#_authors">10. AUTHORS</a></span></dt><dt><span class="section"><a href="#_reporting_bugs">11. REPORTING BUGS</a></span></dt><dt><span class="section"><a href="#_see_also">12. SEE ALSO</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_name"></a>1. NAME</h2></div></div></div><p>layman - manage your local repository of Gentoo overlays</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_synopsis"></a>2. SYNOPSIS</h2></div></div></div><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-a</strong></span>|<span class="strong"><strong>--add</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-d</strong></span>|<span class="strong"><strong>--delete</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-D</strong></span>|<span class="strong"><strong>--disable</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-E</strong></span>|<span class="strong"><strong>--enable</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-f</strong></span>|<span class="strong"><strong>--fetch</strong></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-i</strong></span>|<span class="strong"><strong>--info</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-L</strong></span>|<span class="strong"><strong>--list</strong></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-l</strong></span>|<span class="strong"><strong>--list-local</strong></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-r</strong></span>|<span class="strong"><strong>--readd</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-s</strong></span>|<span class="strong"><strong>--sync</strong></span>) (<span class="strong"><strong>ALL</strong></span>|<span class="emphasis"><em>OVERLAY</em></span>)</p><p><span class="strong"><strong>layman</strong></span> (<span class="strong"><strong>-S</strong></span>|<span class="strong"><strong>--sync-all</strong></span>)</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_description"></a>3. DESCRIPTION</h2></div></div></div><p><span class="strong"><strong>layman</strong></span> is a script that allows you to add, remove, re-add,
update, disable, and then re-enable Gentoo overlays from a variety
of sources.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_warning"></a>3.1. WARNING</h3></div></div></div><p><span class="strong"><strong>layman</strong></span> makes it easy to retrieve and update overlays for Gentoo.
In addition it makes it TRIVIAL to break your system.</p><p>The Gentoo main tree provides you with high quality ebuilds that
are all maintained by Gentoo developers. This will not be the case
for most of the overlays you can get by using <span class="strong"><strong>layman</strong></span>. Thus you
are removing the security shield that the standard tree provides
for you. You should keep that in mind when installing ebuilds from
an overlay.</p><p>To ensure the security of your system you MUST read the source of
the ebuild you are about to install.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_options"></a>4. OPTIONS</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_actions"></a>4.1. ACTIONS</h3></div></div></div><p>List of possible <span class="strong"><strong>layman</strong></span> actions.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>-a</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--add</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Add the given overlay from the cached remote list to your
    locally installed overlays. Specify "ALL" to add all overlays
    from the remote list.
</dd><dt><span class="term">
<span class="strong"><strong>-d</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--delete</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Remove the given overlay from your locally installed overlays.
    Specify "ALL" to remove all overlays.
</dd><dt><span class="term">
<span class="strong"><strong>-D</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--disable</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Disable the given overlay from portage. Specify "ALL" to disable
    all installed overlays.
</dd><dt><span class="term">
<span class="strong"><strong>-E</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--enable</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Re-enable a previously disabled overlay. Specify "ALL" to enable
    all installed overlays.
</dd><dt><span class="term">
<span class="strong"><strong>-f</strong></span>, <span class="strong"><strong>--fetch</strong></span>
</span></dt><dd>
    Fetches the remote list of overlays. You will usually NOT need
    to explicitly specify this option. The fetch operation will be
    performed automatically once you run the sync, sync-all, or list action.
    You can prevent this automatic fetching using the <span class="strong"><strong>--nofetch</strong></span> option.
</dd><dt><span class="term">
<span class="strong"><strong>-i</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--info</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Display all available information about the specified overlay.
</dd><dt><span class="term">
<span class="strong"><strong>-L</strong></span>, <span class="strong"><strong>--list</strong></span>
</span></dt><dd>
    List the contents of the remote list.
</dd><dt><span class="term">
<span class="strong"><strong>-l</strong></span>, <span class="strong"><strong>--list-local</strong></span>
</span></dt><dd>
    List the locally installed overlays.
</dd><dt><span class="term">
<span class="strong"><strong>-n</strong></span>, <span class="strong"><strong>--nofetch</strong></span>
</span></dt><dd>
    Prevents <span class="strong"><strong>layman</strong></span> from automatically fetching the remote lists
    of overlays. The default behavior for <span class="strong"><strong>layman</strong></span> is to update all
    remote lists if you run the sync, list or fetch operation.
</dd><dt><span class="term">
<span class="strong"><strong>-p</strong></span> <span class="emphasis"><em>LEVEL</em></span>, <span class="strong"><strong>--priority</strong></span>=<span class="emphasis"><em>LEVEL</em></span>
</span></dt><dd><p class="simpara">
    Use this option in combination with the <span class="strong"><strong>--add</strong></span>.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
make.conf::
    It will modify the priority of the added overlay and thus influence
    the order of entries in the make.conf file. The lower the priority,
    the earlier in the list the entry will be mentioned in the make.conf.
</li><li class="listitem">
repos.conf::
    It will modify the priority in the repos.conf file, and thus influence
    the portage overlay priority. Read <span class="strong"><strong>man portage</strong></span> for more details on
    overlay priority.
    Use a value between 0 and 100. The default value is 50.
</li></ul></div></dd><dt><span class="term">
<span class="strong"><strong>-r</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--readd</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Remove and re-add the given overlay from the cached
    remote list to your locally installed overlays. Specify "ALL" to
    re-add all local overlays.
</dd><dt><span class="term">
<span class="strong"><strong>-s</strong></span> <span class="emphasis"><em>OVERLAY</em></span>, <span class="strong"><strong>--sync</strong></span>=<span class="emphasis"><em>OVERLAY</em></span>
</span></dt><dd>
    Update the specified overlay. Use "ALL" as parameter to
    synchronize all overlays.
</dd><dt><span class="term">
<span class="strong"><strong>-S</strong></span>, <span class="strong"><strong>--sync-all</strong></span>
</span></dt><dd>
    Update all overlays. Shortcut for <span class="strong"><strong>-s ALL</strong></span>.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_path_options"></a>4.2. PATH OPTIONS</h3></div></div></div><p>List of available <span class="strong"><strong>layman</strong></span> path options.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>-c</strong></span> <span class="emphasis"><em>PATH</em></span>, <span class="strong"><strong>--config</strong></span>=<span class="emphasis"><em>PATH</em></span>
</span></dt><dd>
    Path to an alternative configuration file.
</dd><dt><span class="term">
<span class="strong"><strong>-C</strong></span> <span class="emphasis"><em>PATH</em></span>, <span class="strong"><strong>--configdir</strong></span>=<span class="emphasis"><em>PATH</em></span>
</span></dt><dd>
    Directory path for all layman configuration information.
</dd><dt><span class="term">
<span class="strong"><strong>-o</strong></span> <span class="emphasis"><em>URL</em></span>, <span class="strong"><strong>--overlays</strong></span>=<span class="emphasis"><em>URL</em></span>
</span></dt><dd>
    Specifies the location of additional overlay lists. You can use
    this flag several times and the specified URLs will get temporarily
    appended to the list of URLs you specified in your config file.
    You may also specify local file URLs by prepending the path with
    <span class="emphasis"><em>file://</em></span>. This option will only append the URL for this specific
    <span class="strong"><strong>layman</strong></span> run - edit your config file to add a URL permanently.
    So this is useful for testing purposes.
</dd><dt><span class="term">
<span class="strong"><strong>-O</strong></span> <span class="emphasis"><em>PATH</em></span>, <span class="strong"><strong>--overlay_defs</strong></span> <span class="emphasis"><em>PATH</em></span>
</span></dt><dd>
    Path to additional overlay.xml files.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_output_options"></a>4.3. OUTPUT OPTIONS</h3></div></div></div><p>List of <span class="strong"><strong>layman</strong></span> output options.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--debug-level</strong></span> <span class="emphasis"><em>DEBUG_LEVEL</em></span>
</span></dt><dd>
    Outputs <span class="strong"><strong>layman</strong></span> debugging information. The lower the debug level,
    the less debugging information you’ll get. Use a value between 0
    and 10. 0 means no debugging information, 10 selects all debugging
    messages. The default debug level is 4.
</dd><dt><span class="term">
<span class="strong"><strong>-k</strong></span>, <span class="strong"><strong>--nocheck</strong></span>
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
When listing remote overlays (using <span class="strong"><strong>-L</strong></span> or <span class="strong"><strong>--list</strong></span>) <span class="strong"><strong>layman</strong></span>
    no longer hides overlays, for which you lack the tools to use.
    By default, <span class="strong"><strong>layman</strong></span> hides Git repositories if you do not have Git
    installed.  Same applies to Subversion, CVS and so forth.
</li><li class="listitem">
Prevents <span class="strong"><strong>layman</strong></span> from checking the remote lists of overlays for
    complete overlay definitions. The default behavior for <span class="strong"><strong>layman</strong></span> is
    to reject overlays that do not provide a description or a contact
    attribute.
</li></ul></div></dd><dt><span class="term">
<span class="strong"><strong>-N</strong></span>, <span class="strong"><strong>--nocolor</strong></span>
</span></dt><dd>
    Remove color codes from the <span class="strong"><strong>layman</strong></span> output.
</dd><dt><span class="term">
<span class="strong"><strong>-q</strong></span>, <span class="strong"><strong>--quiet</strong></span>
</span></dt><dd>
    Makes <span class="strong"><strong>layman</strong></span> completely quiet. In quiet mode child processes
    will be run with stdin closed to avoid running into infinite and
    blindly interactive sessions. Thus a child process may abort once
    it runs into an situation with need for human interaction.
    For example this might happen if your overlay resides in Subversion
    and the SSL certificate of the server needs manual acceptance.
</dd><dt><span class="term">
<span class="strong"><strong>-Q</strong></span> <span class="emphasis"><em>LEVEL</em></span>, <span class="strong"><strong>--quietness</strong></span>=<span class="emphasis"><em>LEVEL</em></span>
</span></dt><dd>
    Makes <span class="strong"><strong>layman</strong></span> less verbose. Choose a value between 0 and 4
    with 0 being completely quiet. Once you set this below 3,
    the same warning as given for <span class="strong"><strong>--quiet</strong></span> applies.
</dd><dt><span class="term">
<span class="strong"><strong>-v</strong></span>, <span class="strong"><strong>--verbose</strong></span>
</span></dt><dd>
    Makes <span class="strong"><strong>layman</strong></span> more verbose and you will receive a description of
    the overlays you can download.
</dd><dt><span class="term">
<span class="strong"><strong>-W</strong></span> <span class="emphasis"><em>WIDTH</em></span>, <span class="strong"><strong>--width</strong></span> <span class="emphasis"><em>WIDTH</em></span>
</span></dt><dd>
    Sets the screen width. This setting is usually not required as layman
    is capable of detecting the available number of columns automatically.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_additional_options"></a>4.4. ADDITIONAL OPTIONS</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="strong"><strong>--protocol_filter</strong></span> <span class="emphasis"><em>PROTOCOL</em></span>
</span></dt><dd>
    Sets the protocol filter that determines which protocols will be used
    when adding overlays or updating their source URLs.
</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_configuration"></a>5. CONFIGURATION</h2></div></div></div><p><span class="strong"><strong>layman</strong></span> reads configuration parameters from the file
<span class="emphasis"><em>/etc/layman/layman.cfg</em></span> by default. This file provides seven possible
settings.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
storage
</span></dt><dd>
    Directory that will be used to store the overlays and all
    additional data <span class="strong"><strong>layman</strong></span> needs. The default is <span class="emphasis"><em>/var/lib/layman</em></span>.
    <span class="strong"><strong>layman</strong></span> uses a location within the <span class="emphasis"><em>/usr/portage</em></span> hierarchy
    instead of <span class="emphasis"><em>/var</em></span> in order to store its data. This decision has
    been made to support network file systems. If you have your
    Gentoo tree on NFS or a similar file system and several
    machines access the same ebuild repository over the net it
    will be necessary to also provide all necessary <span class="strong"><strong>layman</strong></span> data
    within the hierarchy of the tree. This way the overlays will
    also have to be synced at one location only.
</dd><dt><span class="term">
cache
</span></dt><dd>
    <span class="strong"><strong>layman</strong></span> will store the downloaded global list of overlays here.
    The default is <span class="emphasis"><em>%(storage)s/cache.xml</em></span>.
</dd><dt><span class="term">
installed
</span></dt><dd>
    <span class="strong"><strong>layman</strong></span> will store the list of installed overlays here.
    The default is <span class="emphasis"><em>%(storage)s/installed.xml</em></span>.
</dd><dt><span class="term">
make.conf
</span></dt><dd><p class="simpara">
    This is the <span class="strong"><strong>portage</strong></span> configuration file that <span class="strong"><strong>layman</strong></span> will
    modify in order to make the new overlays available within
    <span class="strong"><strong>portage</strong></span>. The default is <span class="emphasis"><em>%(storage)s/make.conf</em></span>. You could
    also specify <span class="emphasis"><em>/etc/portage/make.conf</em></span> directly. But that would mean
    that you have an external program trying to automatically
    set variables within this very central configuration file.
    Since I consider that dangerous I prefer having a very small
    external file that only contains the setting for
    <span class="strong"><strong>PORTDIR_OVERLAY</strong></span>. This file is then sourced at the end of
    <span class="emphasis"><em>/etc/portage/make.conf</em></span>. This is the reason why <span class="strong"><strong>layman</strong></span> suggests running
    the following <span class="strong"><strong>after</strong></span> it has been installed.
</p><pre class="literallayout">echo 'source /var/lib/layman/make.conf' &gt;&gt; /etc/portage/make.conf</pre></dd><dt><span class="term">
overlays
</span></dt><dd>
    Specifies the URL for the remote list of all available overlays.
    The default is <span class="emphasis"><em>https://api.gentoo.org/overlays/repositories.xml</em></span>.
    You can specify several URLs here (one per line). The contents will
    get merged to a single list of overlays. This allows to add a personal
    collection of overlays that are not present in the global list.
</dd><dt><span class="term">
proxy
</span></dt><dd>
    Specify your proxy in case you have to use one.
</dd><dt><span class="term">
nocheck
</span></dt><dd>
    Set to "yes" if <span class="strong"><strong>layman</strong></span> should stop worrying about overlays
    with missing a contact address or the description.
</dd><dt><span class="term">
clean_archive
</span></dt><dd>
    Set to "yes" if <span class="strong"><strong>layman</strong></span> will delete archive files downloaded
    when installing archive type overlays. This option is only
    applicable to remote archive overlays. <span class="strong"><strong>layman</strong></span> will leave the
    reponsibility of deleting local archive files up to the user.
    By default, <span class="strong"><strong>layman</strong></span> will delete downloaded archive files.
</dd><dt><span class="term">
check_official
</span></dt><dd>
    Set to "no" if you don’t want layman to prompt you for consent
    during the installation of an unofficial overlay.
</dd></dl></div><p>Per repository type Add, Sync options.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
bzr_addopts
, </span><span class="term">
bzr_syncopts
, </span><span class="term">
cvs_addopts
, </span><span class="term">
cvs_syncopts
, </span><span class="term">
…
</span></dt><dd>
    These are a space separated list of command options to include in the commands sent to perform
    the desired action.
</dd></dl></div><p>Per repository type Post Add, Sync hooks.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
bzr_postsync
, </span><span class="term">
cvs_postsync
, </span><span class="term">
darcs_postsync
, </span><span class="term">
git_postsync
, </span><span class="term">
…
</span></dt><dd>
    These are a space separated list of commands that are run after each add, sync operation if they
    are defined.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_database_configuration_options"></a>5.1. DATABASE CONFIGURATION OPTIONS</h3></div></div></div><p><span class="strong"><strong>layman</strong></span> now supports multiple database types for layman’s install file. The
options allowed include: <span class="strong"><strong>xml</strong></span>, <span class="strong"><strong>json</strong></span>, and <span class="strong"><strong>sqlite</strong></span>. While xml is the default
database type you may migrate from one database type to the other using the
<span class="strong"><strong>layman-updater</strong></span> tool while supplying the <span class="strong"><strong>-m</strong></span> flag, followed by the database
type you’d like to use.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_repo_configuration_options"></a>5.2. REPO CONFIGURATION OPTIONS</h3></div></div></div><p><span class="strong"><strong>layman</strong></span> now accepts multiple repository config file options. One being the
already standard make.conf option and the other being the repos.conf files
that can be placed in /etc/portage/repos.conf/. The below configuration options
allow you to alter particular things regarding the repository configuration::</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
conf_type::
        Specifies the repo configuration type you wish to use. This can
        be <span class="strong"><strong>repos.conf</strong></span>, <span class="strong"><strong>make.conf</strong></span>, or both separated by a comma. The
        default value is <span class="strong"><strong>repos.conf</strong></span>.
</li><li class="listitem">
require_repoconfig::
        Defines whether a configuration file is needed for the package
        manager or other multi-repository consumer application.
</li><li class="listitem">
repos_conf::
        Specifies the path to the config file for all repos.conf
        configuration. The default location is
        <span class="emphasis"><em>/etc/portage/repos.conf/layman.conf</em></span>.
</li><li class="listitem">
auto_sync::
        "yes" or "no" value that defines whether or not you want your
        layman overlays automatically synced by the portage sync plug-in
        (requires repos.conf support).
</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_handling_overlays"></a>6. HANDLING OVERLAYS</h2></div></div></div><p><span class="strong"><strong>layman</strong></span> intends to provide easy maintenance of Gentoo overlays
while not requiring any configuration.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_overlay_lists"></a>6.1. OVERLAY LISTS</h3></div></div></div><p><span class="strong"><strong>layman</strong></span> allows you to fetch an overlay without the need to modify
any configuration files. In order for this to be possible the script
needs an external list of possible overlay sources. There is a
centralized list available at
<span class="emphasis"><em>https://api.gentoo.org/overlays/repositories.xml</em></span>
but nothing will prevent you from using or publishing your own
list of overlays. The location of the remote lists can also be
modified using the <span class="strong"><strong>--overlays</strong></span> option when running <span class="strong"><strong>layman</strong></span>.</p><p>To get a new overlay added to the central list provided for <span class="strong"><strong>layman</strong></span>,
send a mail to &lt;<a class="ulink" href="mailto:overlays@gentoo.org" target="_top">overlays@gentoo.org</a>&gt;. Gentoo developers may add their
overlay entries directly into the list which can be accessed over the
CVS repository for the Gentoo website.</p><p>You can also use several lists at the same time. Just add one URL per
line to the overlays variable in your configuration file. <span class="strong"><strong>layman</strong></span>
will merge the contents of all lists.</p><p><span class="strong"><strong>layman</strong></span> also allows you to define local files in this list.
Just make sure you prepend these path names in standard URL notation with <span class="emphasis"><em>file://</em></span>.
<span class="strong"><strong>layman</strong></span> also gives you the ability to just add an overlay definition to <span class="emphasis"><em>/etc/layman/overlays/some-overlay.xml</em></span> and it will be automatically available for actions such as
add, delete, info…  (see below for file format details)</p><p>If you need to use a proxy for access to the Internet, you can use
the corresponding variable in the <span class="strong"><strong>layman</strong></span> configuration file.
<span class="strong"><strong>layman</strong></span> will also respect the <span class="strong"><strong>http_proxy</strong></span> environment variable in case you set it.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_filtering_protocol_urls"></a>6.2. FILTERING PROTOCOL URLS</h3></div></div></div><p>When adding an overlay or updating its source URL you can specify which
protocols you wish to use. Examples of this include http://, git://, and
https://.</p><p>To filter these protocols on a system-wide level you may alter the
protocol_filter variable in your <span class="strong"><strong>layman</strong></span> configuration file.</p><p>Otherwise, you may specify which protocols you would prefer to be filtered out
on a per-run basis using the <span class="strong"><strong>--protocol_filter</strong></span> flag.</p><p>Using this filtering will ensure that no other protocols other than the ones
specified will be used. Meaning that if an overlay does not support any of
the specified protocols, it will not install.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_local_cache"></a>6.3. LOCAL CACHE</h3></div></div></div><p><span class="strong"><strong>layman</strong></span> stores a local copy of the fetched remote list.
It will be stored in <span class="emphasis"><em>/var/lib/layman/cache.xml</em></span> by default.
There exists only one such cache file and it will be overwritten
every time you run <span class="strong"><strong>layman</strong></span>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_handling_etc_portage_make_conf"></a>6.4. HANDLING /ETC/PORTAGE/MAKE.CONF</h3></div></div></div><p>Since <span class="strong"><strong>layman</strong></span> is designed to automatically handle the inclusion of
overlays into your system it needs to be able to modify the
<span class="strong"><strong>PORTDIR_OVERLAY</strong></span> variable in your <span class="emphasis"><em>/etc/portage/make.conf</em></span> file.
But <span class="emphasis"><em>/etc/portage/make.conf</em></span> is a very central and essential configuration
file for a Gentoo system. Automatically modifying this file would
be somewhat dangerous. You can allow <span class="strong"><strong>layman</strong></span> to do this by
setting the make_conf variable in the configuration file to
<span class="emphasis"><em>/etc/portage/make.conf</em></span>.</p><p>A much safer and in fact recommended solution to the problem is
to let <span class="strong"><strong>layman</strong></span> handle an external file that only contains the
<span class="strong"><strong>PORTDIR_OVERLAY</strong></span> variable and is sourced within the standard
<span class="emphasis"><em>/etc/portage/make.conf</em></span> file. Just add the following line to the end of
your <span class="emphasis"><em>/etc/portage/make.conf</em></span> file:</p><pre class="screen">source /var/lib/layman/make.conf</pre><p><span class="emphasis"><em>/var/lib/layman/make.conf</em></span> is the default provided in the <span class="strong"><strong>layman</strong></span>
configuration. Change this file name in case you decide to store
it somewhere else.</p><p>The file does not necessarily need to exist at the beginning.
If it is missing, <span class="strong"><strong>layman</strong></span> will create it for you.</p><p>There is also no need to remove the original <span class="strong"><strong>PORTDIR_OVERLAY</strong></span>
variable from the make.conf file. Layman will simply add new overlays
to this variable and all your old entries will remain in there.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_adding_removing_and_updating_overlays"></a>6.5. ADDING, REMOVING AND UPDATING OVERLAYS</h3></div></div></div><p>Once a remote list of overlays has been fetched, <span class="strong"><strong>layman</strong></span> allows
to add overlays from the remote list to your system. The script
will try to fetch the overlay. If this is successful the overlay
information will be copied from the cache to the list of locally
installed overlays. In addition <span class="strong"><strong>layman</strong></span> will modify the
<span class="strong"><strong>PORTDIR_OVERLAY</strong></span> variable to include the new overlay path.</p><p>Removing the overlay with <span class="strong"><strong>layman</strong></span> will delete the overlay without
leaving any traces behind.</p><p>In order to update all overlays managed by <span class="strong"><strong>layman</strong></span> you can run
the script with the <span class="strong"><strong>--sync ALL</strong></span> option or the <span class="strong"><strong>--sync-all</strong></span> flag.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_emphasis_role_strong_new_emphasis_disabling_and_re_enabling_overlays"></a>6.6. <span class="strong"><strong>NEW</strong></span> DISABLING, AND RE-ENABLING OVERLAYS</h3></div></div></div><p>portage will find installed overlays via your repo config files,
whether it be make.conf or repos.conf. If you wish to hide the
overlay from portage so that the ebuilds will not be accessible
then you can do so with the <span class="strong"><strong>--disable</strong></span> <span class="emphasis"><em>OVERLAY</em></span> option. This
will then disable the overlay in your repo configurations.</p><p>To re-enable them again so that portage can again access the
ebuilds of that overlay you can simply do so with the
<span class="strong"><strong>--enable</strong></span> <span class="emphasis"><em>OVERLAY</em></span> option.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_list_overlays"></a>6.7. LIST OVERLAYS</h3></div></div></div><p><span class="strong"><strong>layman</strong></span> provides the <span class="strong"><strong>-L</strong></span>, <span class="strong"><strong>--list</strong></span> and <span class="strong"><strong>-l</strong></span>, <span class="strong"><strong>--list-local</strong></span> options to print
a list of available respectively installed overlays.</p><p>Listing will prepend all fully supported overlays with a green
asterisk, all non-official overlays with a yellow asterisk and
all overlays that you will not be able to use since you do not
have the necessary tools installed with a red asterisk.</p><p>In the default mode <span class="strong"><strong>layman</strong></span> will be strict about listing overlays
and only present you with overlays that are fully supported.
In addition it will complain about overlays that are missing
a description field or a contact attribute. This type of behavior
has been added with <span class="strong"><strong>layman</strong></span> 1.0.7 and if you’d like to return to
the old behavior you may use the k option flag or set the nocheck
option in the configuration file.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_searching_ebuilds_in_overlays"></a>6.8. SEARCHING EBUILDS IN OVERLAYS</h3></div></div></div><p>You can search through the ebuilds available in the overlays on
<span class="emphasis"><em>http://overlays.gentoo.org/</em></span> by using <span class="strong"><strong>eix</strong></span>. Emerge the package and
run:</p><pre class="literallayout">update-eix-remote update</pre><p>Alternatively, you can browse overlays that you have not installed
on <span class="emphasis"><em>http://gpo.zugaina.org/</em></span>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_overlay_types"></a>6.9. OVERLAY TYPES</h3></div></div></div><p>Currently <span class="strong"><strong>layman</strong></span> supports overlays that are exported via <span class="strong"><strong>rsync</strong></span>,
<span class="strong"><strong>CVS</strong></span>, <span class="strong"><strong>subversion</strong></span>, <span class="strong"><strong>bzr</strong></span>, <span class="strong"><strong>darcs</strong></span>, <span class="strong"><strong>git</strong></span>, <span class="strong"><strong>mercurial</strong></span>, <span class="strong"><strong>tar</strong></span>
packages, or <span class="strong"><strong>squashfs</strong></span> images that will be mounted read-only.
It also supports the generated overlay type <span class="strong"><strong>g-sorcery</strong></span> installed with
the g-cran package (at time of this writing, only available in the science
overlay).</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_overlay_lists_2"></a>7. OVERLAY LISTS</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_overlay_list_format"></a>7.1. OVERLAY LIST FORMAT</h3></div></div></div><p>Layman uses a central list of overlays in XML format. The file looks
like this:</p><p>Example 1. An example overlays.xml file</p><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE repositories SYSTEM "/dtd/repositories.dtd"&gt;
&lt;repositories xmlns="" version="1.0"&gt;
&lt;repo quality="experimental" status="official"&gt;
    &lt;name&gt;gnome&lt;/name&gt;
    &lt;description&gt;experimental gnome ebuilds&lt;/description&gt;
    &lt;homepage&gt;http://git.overlays.gentoo.org/gitweb/?p=proj/gnome.git;a=summary&lt;/homepage&gt;
    &lt;owner type="project"&gt;
        &lt;email&gt;gnome@gentoo.org&lt;/email&gt;
        &lt;name&gt;GNOME herd&lt;/name&gt;
    &lt;/owner&gt;
    &lt;source type="git"&gt;git://git.overlays.gentoo.org/proj/gnome.git&lt;/source&gt;
    &lt;source type="git"&gt;http://git.overlays.gentoo.org/gitroot/proj/gnome.git&lt;/source&gt;
    &lt;source type="git"&gt;git+ssh://git@git.overlays.gentoo.org/proj/gnome.git&lt;/source&gt;
    &lt;feed&gt;http://git.overlays.gentoo.org/gitweb/?p=proj/gnome.git;a=atom&lt;/feed&gt;
    &lt;feed&gt;http://git.overlays.gentoo.org/gitweb/?p=proj/gnome.git;a=rss&lt;/feed&gt;
&lt;/repo&gt;
&lt;/repositories&gt;</pre><p>Example 2. An example overlays.xml file with a branch</p><pre class="screen">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE repositories SYSTEM "/dtd/repositories.dtd"&gt;
&lt;repositories xmlns="" version="1.0"&gt;
&lt;repo quality="experimental" status="official"&gt;
    &lt;name&gt;&lt;hardened-development&gt;&lt;/name&gt;
    &lt;description&gt;&lt;Development Overlay for Hardened Gcc 4.x Toolchain&gt;&lt;/description&gt;
    &lt;homepage&gt;http://git.overlays.gentoo.org/gitweb/?p=proj/hardened-dev.git;a=summary&lt;/homepage&gt;
    &lt;owner type="project"&gt;
       &lt;email&gt;hardened@gentoo.org&lt;/email&gt;
    &lt;/owner&gt;
    &lt;source type="git" branch="uclibc"&gt;git://git.overlays.gentoo.org/proj/hardened-dev.git&lt;/source&gt;
    &lt;feed&gt;http://git.overlays.gentoo.org/gitweb/?p=proj/hardened-dev.git;a=atom&lt;/feed&gt;
&lt;/repo&gt;
&lt;/repositories&gt;</pre><p>Users can specify a branch for an overlay, given one actually exists.
This logic is applicable to CVS overlays as well and the branch variable
is comparable to specifying a subpath for a CVS repository.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
VCS types where the use of "branch" is supported is as follows
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
CVS
</li><li class="listitem">
Squashfs
</li><li class="listitem">
Tar
</li><li class="listitem">
Git
</li><li class="listitem">
Mercurial
However, for CVS, Squashfs, and Tar overlays, the branch will be treated as a
subpath. If you use the branch variable with any other overlay types aside from
the ones listed, it will be ignored.
</li></ul></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_adding_an_overlay_locally"></a>7.2. ADDING AN OVERLAY LOCALLY</h3></div></div></div><p>Simply create an overlay list in the format described above and run
<span class="strong"><strong>layman</strong></span> with the -o switch. You need to prepend local file URLs
with <span class="emphasis"><em>file://</em></span>.  <span class="strong"><strong>New</strong></span> is the ability to just add an overlay definition like
 the above to /etc/layman/overlays/some-overlay.xml and it will be
 automatically available for actions such as add, delete, info…</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_adding_an_overlay_globally"></a>7.3. ADDING AN OVERLAY GLOBALLY</h3></div></div></div><p>The global list of overlays used by <span class="strong"><strong>layman</strong></span> lies at
<span class="emphasis"><em>https://api.gentoo.org/overlays/repositories.xml</em></span>.</p><p>All Gentoo developers have access to this location via CVS and
can modify the list of overlays.</p><p>If you are not a Gentoo developer but wish to get your overlay
listed you should contact the Gentoo Overlays team at
&lt;<a class="ulink" href="mailto:overlays@gentoo.org" target="_top">overlays@gentoo.org</a>&gt;. You can also join <span class="strong"><strong>#gentoo-overlays</strong></span> on
irc.freenode.net.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_examples"></a>8. EXAMPLES</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_installing_an_overlay"></a>8.1. INSTALLING AN OVERLAY</h3></div></div></div><pre class="screen">layman -f -a wrobel</pre><p>This would add the overlay with the id wrobel to your list of
installed overlays.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_syncing_your_overlays"></a>8.2. SYNCING YOUR OVERLAYS</h3></div></div></div><pre class="screen">layman -s ALL</pre><p>This updates all overlays</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_performing_several_actions_at_the_same_time"></a>8.3. PERFORMING SEVERAL ACTIONS AT THE SAME TIME</h3></div></div></div><pre class="screen">layman -f -a wrobel webapps-experimental</pre><p>This fetches the remote list and immediately adds two overlays</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_files"></a>9. FILES</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="emphasis"><em>/etc/layman/layman.cfg</em></span>
</span></dt><dd>
    Configuration file, holding the defaults for <span class="strong"><strong>layman</strong></span>
</dd><dt><span class="term">
<span class="emphasis"><em>/var/lib/layman/make.conf</em></span>
</span></dt><dd>
    Configuration file that layman modifies to
    register the installed overlay(s) with the package manager
</dd><dt><span class="term">
<span class="emphasis"><em>/etc/portage/repos.conf/layman.conf</em></span>
</span></dt><dd>
    Configuration file that layman modifies to
    register the installed overlay(s) with the package manager
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_authors"></a>10. AUTHORS</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Gunnar Wrobel &lt;<a class="ulink" href="mailto:wrobel@gentoo.org" target="_top">wrobel@gentoo.org</a>&gt; (original, retired)
</li><li class="listitem">
Sebastian Pipping &lt;<a class="ulink" href="mailto:sping@gentoo.org" target="_top">sping@gentoo.org</a>&gt;
</li><li class="listitem">
Brian Dolbec &lt;<a class="ulink" href="mailto:brian.dolbec@gmail.com" target="_top">brian.dolbec@gmail.com</a>&gt;
</li><li class="listitem">
Devan Franchini &lt;<a class="ulink" href="mailto:twitch153@gentoo.org" target="_top">twitch153@gentoo.org</a>&gt;
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_reporting_bugs"></a>11. REPORTING BUGS</h2></div></div></div><p>Please report bugs you might find at <span class="emphasis"><em>http://bugs.gentoo.org/</em></span>.  Thank you!</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_see_also"></a>12. SEE ALSO</h2></div></div></div><p>make.conf(5), eix(1), portage(5)</p></div></div></body></html>